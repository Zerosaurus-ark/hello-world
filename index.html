<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>USDC Mining Simulation</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/web3@1.7.5/dist/web3.min.js"></script>
</head>

<body>
    <div class="container">
        <h1>USDC Mining Simulation</h1>

        <!-- Wallet Section -->
        <div class="wallet">
            <h2>Wallet</h2>
            <p>Connected Wallet: <span id="walletAddress">Not Connected</span></p>
            <p>Balance: <span id="balance">0</span> USDC</p>
            <button onclick="addBalance()">Deposit 100 USDC</button>
            <button onclick="connectWallet()">Connect Wallet</button>
        </div>

        <!-- Dashboard Section -->
        <div class="dashboard">
            <h2>Dashboard</h2>
            <p>USDC Mined: <span id="usdcMined">0</span> USDC</p>
            <p>Mining Speed: <span id="miningSpeed">0</span> USDC/second</p>
            <button onclick="claimUSDC()">Claim USDC</button>
            <div id="loading">Claiming...</div>
        </div>

        <!-- NFT Shop Section -->
        <div class="shop">
            <h2>NFT Shop</h2>

            <div class="nft">
                <p>NFT 1 (+50 USDC/month) - Price: 30 USDC</p>
                <button onclick="buyNFT(1)">Buy</button>
            </div>

            <div class="nft">
                <p>NFT 2 (+100 USDC/month) - Price: 50 USDC</p>
                <button onclick="buyNFT(2)">Buy</button>
            </div>

            <div class="nft">
                <p>NFT 3 (+200 USDC/month) - Price: 80 USDC</p>
                <button onclick="buyNFT(3)">Buy</button>
            </div>

            <div class="nft">
                <p>NFT 4 (+500 USDC/month) - Price: 100 USDC</p>
                <button onclick="buyNFT(4)">Buy</button>
            </div>
        </div>
    </div>

    <script>
        let web3;
        let currentAccount;

        async function connectWallet() {
            if (typeof window.ethereum !== 'undefined') {
                try {
                    web3 = new Web3(window.ethereum);
                    const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
                    currentAccount = accounts[0];
                    document.getElementById('walletAddress').innerText = currentAccount;

                    // Yêu cầu chữ ký
                    const message = 'Please sign to connect to USDC Mining Simulation.';
                    const signature = await web3.eth.personal.sign(message, currentAccount);

                    alert('Wallet connected and signature verified!');

                } catch (error) {
                    console.error(error);
                    alert('Connection failed.');
                }
            } else {
                alert('MetaMask not detected!');
            }
        }
    </script>

    <script src="script.js"></script>
</body>

</html>

